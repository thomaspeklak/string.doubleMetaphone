//DoubleMetaphone extends the String class.
//Usage:
// "Test".doubleMetaphone();
(function(){function D(r,D,O,$){var _=r.charAt(D);switch(!0){case c(_):return D?[null,null,1]:[d,d,1];case _==e:return[s,s,e==r.charAt(D+1)?2:1];case _=="Ç":return[v,v,1];case _==f:return D>1&&!c(r.charAt(D-2))&&"ACH"==r.substr(D-1,3)&&r.charAt(D+2)!=l&&(r.charAt(D+2)!=h||/^(B|M)ACHER$/.test(r.substr(D-2,6)))?[n,n,2]:!D&&"CAESAR"==r.substr(D,6)?[v,v,2]:"CHIA"==r.substr(D,4)?[n,n,2]:"CH"==r.substr(D,2)?D&&"CHAE"==r.substr(D,4)?[n,A,2]:!D&&(a(["HARAC","HARIS"],r.substr(D+1,5))||a(["HOR","HYM","HIA","HEM"],r.substr(D+1,3)))&&r.substr(0,5)!="CHORE"?[n,n,2]:a(["VON","VAN"],r.substr(0,4))||"SCH"==r.substr(0,3)||a(["ORCHES","ARCHIT","ORCHID"],r.substr(D-2,6))||/^T|S$/.test(r.charAt(D+2))||(!D||/^[AOUE]$/.test(r.charAt(D-1)))&&/^[LRNMBHFVW ]$/.test(r.charAt(D+2))?[n,n,2]:D?["MC"==r.substr(0,2)?n:A,n,2]:[A,A,2]:C==r.charAt(D+1)&&"WI"!=r.substr(D-2,2)?[v,A,2]:"CIA"==r.substr(D+1,3)?[A,A,3]:f==r.charAt(D+1)&&1!=D&&p!=r.charAt(0)?/^[IEH]$/.test(r.charAt(D+2))&&"HU"!=r.substr(D+2,2)?1==D&&d==r.charAt(D-1)||/^UCCE(E|S)$/.test(r.substr(D-1,5))?["KS","KS",3]:[A,A,3]:[n,n,2]:/^[KGQ]$/.test(r.charAt(D+1))?[n,n,2]:/^[IEY]$/.test(r.charAt(D+1))?[v,/^I(O|E|A)$/.test(r.substr(D+1,2))?A:v,2]:/^ (C|Q|G)$/.test(r.substr(D+1,2))?[n,n,3]:[n,n,/^[CKQ]$/.test(r.charAt(D+1))&&!a(["CE","CI"],r.substr(D+1,2))?2:1];case _==g:return r.charAt(D+1)==j?/^[IEY]$/.test(r.charAt(D+2))?[m,m,3]:["TK","TK",2]:[w,w,/^[DT]$/.test(r.charAt(D+1))?2:1];case _==i:return[i,i,i==r.charAt(D+1)?2:1];case _==j:return k==r.charAt(D+1)?D&&!c(r.charAt(D-1))?[n,n,2]:D?D>1&&/^[BHD]$/.test(r.charAt(D-2))||D>2&&/^[BHD]$/.test(r.charAt(D-3))||D>3&&/^B|H$/.test(r.charAt(D-4))?[null,null,2]:D>2&&x==r.charAt(D-1)&&/^[CGLRT]$/.test(r.charAt(D-3))?[i,i,2]:D&&l!=r.charAt(D-1)?[n,n,2]:[null,null,2]:l==r.charAt(D+2)?[m,m,2]:[n,n,2]:q==r.charAt(D+1)?1==D&&c(r.charAt(0))&&!b(r)?["KN",q,2]:"EY"!=r.substr(D+2,2)&&B!=r.charAt(D+1)&&!b(r)?[q,"KN",2]:["KN","KN",2]:"LI"==r.substr(D+1,2)?["KL",o,2]:!D&&(B==r.charAt(D+1)||/^(E(S|P|B|L|Y|I|R)|I(B|L|N|E))$/.test(r.substr(D+1,2)))?[n,m,2]:("ER"==r.substr(D+1,2)||B==r.charAt(D+1))&&!/^(D|R|M)ANGER$/.test(r.substr(0,6))&&!/^E|I$/.test(r.charAt(D-1))&&!/^(R|O)GY$/.test(r.substr(D-1,3))?[n,m,2]:/^[EIY]$/.test(r.charAt(D+1))||/^(A|O)GGI$/.test(r.substr(D-1,4))?/^V(A|O)N $/.test(r.substr(0,4))||"SCH"==r.substr(0,3)||"ET"==r.substr(D+1,2)?[n,n,2]:"IER "==r.substr(D+1,4)?[m,m,2]:[m,n,2]:j==r.charAt(D+1)?[n,n,2]:[n,n,1];case _==k:return!D||c(r.charAt(D-1))&&c(r.charAt(D+1))?[k,k,2]:[null,null,1];case _==m:if("OSE"==r.substr(D+1,3)||"SAN "==r.substr(0,4))return!D&&" "==r.charAt(D+4)||"SAN "==r.substr(0,4)?[k,k,1]:[m,k,1];var ba=m==r.charAt(D+1)?2:1;return!D&&"OSE"!=r.substr(D+1,3)?[m,d,ba]:c(r.charAt(D-1))&&!b(r)&&/^A|O$/.test(r.charAt(D+1))?[m,k,ba]:$==D?[m,null,ba]:!/^[LTKSNMBZ]$/.test(r.charAt(D+1))&&!/^[SKL]$/.test(r.charAt(D-1))?[m,m,ba]:[null,null,ba];case _==n:return[n,n,n==r.charAt(D+1)?2:1];case _==o:return o==r.charAt(D+1)?O-3==D&&/^(ILL(O|A)|ALLE)$/.test(r.substr(D-1,4))||/^(A|O)S$/.test(r.substr($-1,2))||/^A|O$/.test(r.charAt($))&&"ALLE"==r.substr(D-1,4)?[o,null,2]:[o,o,2]:[o,o,1];case _==p:return"UMB"==r.substr(D-1,3)&&($-1==D||"ER"==r.substr(D+2,2))||p==r.charAt(D+1)?[p,p,2]:[p,p,1];case _==q:return[q,q,q==r.charAt(D+1)?2:1];case _=="Ñ":return[q,q,1];case _==s:return k==r.charAt(D+1)?[i,i,2]:[s,s,/^P|B$/.test(r.charAt(D+1))?2:1];case _==t:return[n,n,t==r.charAt(1)?2:1];case _==u:var ba=u==r.charAt(D+1)?2:1;return $==D&&!b(r)&&"IE"==r.substr(D-2,2)&&!/^M(E|A)$/.test(r.substr(D-4,2))?[null,u,ba]:[u,u,ba];case _==v:return/^(I|Y)SL$/.test(r.substr(D-1,3))?[null,null,1]:0==D&&"SUGAR"==r.substr(0,5)?[A,v,1]:k==r.charAt(D+1)?/^H(EIM|OEK|OLM|OLZ)$/.test(r.substr(D+1,4))?[v,v,2]:[A,A,2]:/^I(O|A)$/.test(r.substr(D+1,2))?[v,b(r)?v:A,3]:!D&&/^[MNLW]$/.test(r.charAt(1))||C==r.charAt(D+1)?[v,A,C==r.charAt(D+1)?2:1]:f==r.charAt(D+1)?k==r.charAt(D+2)?/^OO|ER|EN|UY|ED|EM$/.test(r.substr(D+3,2))?[/^E(R|N)$/.test(r.substr(D+3,2))?A:"SK","SK",3]:[A,!D&&!c(r.charAt(3))&&z!=r.charAt(D+3)?v:A,3]:/^[IEY]$/.test(r.charAt(D+2))?[v,v,3]:["SK","SK",3]:[$==D&&/^(A|O)I$/.test(r.substr(D-2,2))?null:v,v,/^S|Z$/.test(r.charAt(D+1))?2:1];case _==w:return"ION"==r.substr(D+1,3)||/^IA|CH$/.test(r.substr(D+1,2))?[A,A,3]:k==r.charAt(D+1)||"TH"==r.substr(D+1,2)?/^(O|A)M$/.test(r.substr(D+2,2))||/^V(A|O)N $/.test(r.substr(0,4))||"SCH"==r.substr(0,3)?[w,w,2]:["0",w,2]:[w,w,/^T|D$/.test(r.charAt(D+1))?2:1];case _==y:return[i,i,y==r.charAt(D+1)?2:1];case _==z:if(u==r.charAt(D+1))return[u,u,2];var bb="",bc="";if(!D&&c(r.charAt(D+1))||k==r.charAt(D+1))bb=d,bc=c(r.charAt(D+1))?i:d;return $==D&&c(r.charAt(D-1))||"SCH"==r.substr(0,3)||/^EWSKI|EWSKY|OWSKI|OWSKY$/.test(r.substr(D-1,5))?[bb,bc+i,1]:/^I(C|T)Z$/.test(r.substr(D+1,3))?[bb+"TS",bc+"FX",4]:[bb,bc,1];case _==A:var ba=/^C|X$/.test(r.charAt(D+1))?2:1;return $==D&&(/^(I|E)AU$/.test(r.substr(D-3,3))||/^(A|O)U$/.test(r.substr(D-2,2)))?[null,null,ba]:["KS","KS",ba];case _==C:if(k==r.charAt(D+1))return[m,m,2];var ba=C==r.charAt(D+1)?2:1;return/^Z(O|I|A)$/.test(r.substr(D+1,2))||b(r)&&D>0&&w!=r.charAt(D-1)?[v,"TS",ba]:[v,v,ba]}return[null,null,1]}var a=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]==b)return!0;return!1},b=function(a){return/W|K|CZ|WITZ/.test(a)},c=function(a){return/^[AEIOUY]$/.test(a)};String.prototype.doubleMetaphone=function(){var a=[],b=[],c=0,d=this.toUpperCase()+"     ",e=this.length,f=e-1;/^GN|KN|PN|WR|PS$/.test(d.substr(0,2))&&(c+=1),"X"==d.substr(0,1)&&(a.push("S"),b.push("S"),c+=1);var g=[];while((a.length<4||b.length<4)&&c<=e)g=D(d,c,e,f),g[0]&&a.push(g[0]),g[1]&&b.push(g[1]),c+=g[2];a=a.join("").substr(0,4),b=b.join("").substr(0,4);return[a,a==b?null:b]};var d="A",e="B",f="C",g="D",h="E",i="F",j="G",k="H",l="I",m="J",n="K",o="L",p="M",q="N",r="O",s="P",t="Q",u="R",v="S",w="T",x="U",y="V",z="W",A="X",B="Y",C="Z"})()